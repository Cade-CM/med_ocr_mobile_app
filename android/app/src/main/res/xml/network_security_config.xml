<?xml version="1.0" encoding="utf-8"?>
<!--
  Network Security Configuration
  
  Security settings:
  - Disables cleartext (HTTP) traffic - all connections must use HTTPS
  - Enables certificate validation
  - Optionally can add certificate pinning for high-security scenarios
  
  This prevents:
  - Man-in-the-middle attacks
  - Accidental HTTP usage
  - Traffic interception on untrusted networks
-->
<network-security-config>
    <!-- Base config: HTTPS only, no cleartext -->
    <base-config cleartextTrafficPermitted="false">
        <trust-anchors>
            <!-- Trust system CAs -->
            <certificates src="system" />
        </trust-anchors>
    </base-config>
    
    <!-- 
      Debug overrides: Allow localhost for development
      This only applies to debug builds, not release
    -->
    <debug-overrides>
        <trust-anchors>
            <!-- Trust user-installed CAs for debugging (e.g., Charles Proxy) -->
            <certificates src="user" />
        </trust-anchors>
    </debug-overrides>
    
    <!--
      Domain-specific config for development localhost
      Only allows cleartext to localhost/10.0.2.2 (Android emulator)
    -->
    <domain-config cleartextTrafficPermitted="true">
        <domain includeSubdomains="false">localhost</domain>
        <domain includeSubdomains="false">10.0.2.2</domain>
        <domain includeSubdomains="false">127.0.0.1</domain>
    </domain-config>
</network-security-config>
